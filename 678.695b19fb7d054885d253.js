"use strict";(self.webpackChunkmusicblocks=self.webpackChunkmusicblocks||[]).push([[678],{6111:function(n,t,r){r.r(t),r.d(t,{InvalidArgumentError:function(){return f},InvalidInstructionError:function(){return l}});var e=r(5671),o=r(3144),c=r(136),a=r(3930),i=r(1120);function u(n){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(n){return!1}}();return function(){var r,e=(0,i.Z)(n);if(t){var o=(0,i.Z)(this).constructor;r=Reflect.construct(e,arguments,o)}else r=e.apply(this,arguments);return(0,a.Z)(this,r)}}var s=function(n){(0,c.Z)(r,n);var t=u(r);function r(n,o){var c;return(0,e.Z)(this,r),(c=t.call(this,o))._name=n,c._message=o,c}return(0,o.Z)(r,[{key:"toString",value:function(){return"".concat(this._name,": ").concat(this._message)}},{key:"type",get:function(){return this._name}}]),r}((0,r(2407).Z)(Error)),l=function(n){(0,c.Z)(r,n);var t=u(r);function r(n){return(0,e.Z)(this,r),t.call(this,"InvalidInstructionError",n)}return(0,o.Z)(r)}(s),f=function(n){(0,c.Z)(r,n);var t=u(r);function r(n){return(0,e.Z)(this,r),t.call(this,"InvalidArgumentError",n)}return(0,o.Z)(r)}(s)},678:function(n,t,r){r.r(t),r.d(t,{buildProgram:function(){return g},generateAPI:function(){return m},resetProgram:function(){return v}});var e,o=r(1002),c=r(4942),a=r(885),i=r(3320),u=r(9274),s=r(1645),l=r(6111);function f(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(n);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.push.apply(r,e)}return r}function p(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,c.Z)(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))}))}return n}function m(){e=Object.fromEntries(Object.entries((0,u.getSpecificationSnapshot)()).map((function(n){var t=(0,a.Z)(n,2);return[t[0],p(p({},t[1]),{},{args:null})]}))),Object.entries(e).forEach((function(n){var t=(0,a.Z)(n,2),r=t[0],o=(t[1],(0,s.addInstance)(r)),c=(0,s.getInstance)(o).instance;e[r].args=0===c.argLabels.length?null:c.argLabels.map((function(n){return[n,c.getArgType(n)]})),(0,s.removeInstance)(o)}));var n={};Object.entries(e).forEach((function(t){var r=(0,a.Z)(t,2),e=r[0],o=r[1],c=o.category;c in n||(n[c]=[]),n[c].push([e,o.type,o.args])}));var t=[];return Object.entries(n).forEach((function(n){var r=(0,a.Z)(n,2),e=r[0],o=r[1];t.push('# "'.concat(e,'" elements\n# ------------------------')),o.forEach((function(n){var r=(0,a.Z)(n,3),e=r[0],o=r[1],c=r[2];"Data"===o?t.push("- [instruction]:\n    [param]:\n      ".concat(e,": string")):"Expression"===o?null===c||(1===c.length?t.push("- [instruction]:\n    ".concat(e,":\n").concat(c.map((function(n){var t=(0,a.Z)(n,2),r=t[0],e=t[1];return"      ".concat(r,": ").concat(e.join("|"))})).join("\n"))):t.push("- [instruction]:\n    [param]:\n      ".concat(e,":\n").concat(c.map((function(n){var t=(0,a.Z)(n,2),r=t[0],e=t[1];return"        ".concat(r,": ").concat(e.join("|"))})).join("\n")))):"Statement"===o?null===c?t.push("- ".concat(e)):1===c.length?t.push("- ".concat(e,": ").concat(c[0][1].join("|"))):t.push("- ".concat(e,":\n").concat(c.map((function(n){var t=(0,a.Z)(n,2),r=t[0],e=t[1];return"    ".concat(r,": ").concat(e.join("|"))})).join("\n"))):"Block"===o&&(null===c?t.push("- ".concat(e,":\n    scope:\n      - [instruction]\n      - ...")):t.push("- ".concat(e,":\n").concat(c.map((function(n){var t=(0,a.Z)(n,2),r=t[0],e=t[1];return"    ".concat(r,": ").concat(e.join("|"))})).join("\n"),"\n    scope:\n      - [instruction]\n      - ...")))})),t.push("\n")})),t.join("\n")}function g(n){var t;function r(){function n(n){var t=e[n].args;if(null===t)throw new l.InvalidArgumentError('"'.concat(n,'" does not take arguments'));if(1!==t.length)throw new l.InvalidArgumentError('"'.concat(n,'" takes ').concat(t.length," arguments but only 1 argument supplied"));return t[0][0]}function r(n,t){var r=e[n].args;if(null===r)throw new l.InvalidArgumentError('"'.concat(n,'" does not take arguments'));var o="Block"===e[n].type,c=r.map((function(n){var t=(0,a.Z)(n,2),r=t[0];return t[1],r})),i=Object.keys(t);if(o){if(!i.includes("scope"))throw new l.InvalidInstructionError('"'.concat(n,'" expects a scope'));if(!(t.scope instanceof Array))throw new l.InvalidInstructionError('"'.concat(n,'" supplied with invalid scope'));c.push("scope")}if(c.length!==i.length)throw new l.InvalidArgumentError('invalid number of arguments supplied for "'.concat(n,'"'));if(0!==c.filter((function(n){return!i.includes(n)})).length)throw new l.InvalidArgumentError('invalid arguments supplied for "'.concat(n,'"'))}function c(t,i,u){if("object"!==(0,o.Z)(u))return{elementName:"boolean"==typeof u?"value-boolean":"number"==typeof u?"value-number":"value-string",value:u.toString()};if(1!==Object.keys(u).length)throw new l.InvalidArgumentError('invalid argument for parameter "'.concat(i,'" of "').concat(t,'"'));var s=(0,a.Z)(Object.entries(u)[0],2),f=s[0],p=s[1];if(i===f)return c(t,i,p);if(!(f in e))throw new l.InvalidInstructionError('"'.concat(f,'" is not a valid argument for "').concat(f,'"'));var m=e[f];if("Data"===m.type){if("string"==typeof p)return{elementName:f,value:p};throw new l.InvalidArgumentError("invalid argument for 'Data' element \"".concat(f,'"'))}if("Expression"===m.type){var g={elementName:"",argMap:null};if(g.elementName=f,"object"!==(0,o.Z)(p)||1===Object.keys(p).length){var v=n(f);g.argMap=Object.fromEntries([[v,c(f,v,p)]])}else r(f,p),g.argMap=Object.fromEntries(Object.entries(p).map((function(n){var t=(0,a.Z)(n,2),r=t[0],e=t[1];return[r,c(f,r,e)]})));return g}throw new l.InvalidArgumentError('"'.concat(f,"\" is not a 'Data' or 'Expression' element"))}function i(t){if("string"==typeof t){if(!(t in e))throw new l.InvalidInstructionError('"'.concat(t,'" is not a valid instruction'));return{elementName:t,argMap:null}}if(1!==Object.keys(t).length)throw new l.InvalidInstructionError("wrong instruction format encountered");var u=(0,a.Z)(Object.entries(t)[0],2),s=u[0],f=u[1];if(!(s in e))throw new l.InvalidInstructionError('"'.concat(t,'" is not a valid instruction'));var p={elementName:"",argMap:null};if(p.elementName=s,"object"!==(0,o.Z)(f)||1===Object.keys(f).length){var m=n(s);p.argMap=Object.fromEntries([[m,c(s,m,f)]])}else r(s,f),p.argMap=Object.fromEntries(Object.entries(f).filter((function(n){var t=(0,a.Z)(n,2),r=t[0];return t[1],"scope"!==r})).map((function(n){var t=(0,a.Z)(n,2),r=t[0],e=t[1];return[r,c(s,r,e)]}))),"scope"in f&&(p.scope=f.scope.map((function(n){return i(n)})));return p}var s={process:[],routine:[],crumbs:[t.map((function(n){return i(n)}))]};(0,u.generateFromSnapshot)(s)}return new Promise((function(e){if(!1===function(){try{return(t=(0,i.load)(n))instanceof Array}catch(n){var r=n;return console.log({mark:r.mark,message:r.message,name:r.name,reason:r.reason}),!1}}())e(!1);else{var o=(0,u.generateSnapshot)();try{r(),e(!0)}catch(n){console.log(n),(0,u.generateFromSnapshot)(o),e(!1)}}}))}function v(){(0,u.resetSyntaxTree)()}}}]);