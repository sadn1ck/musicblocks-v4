"use strict";(self.webpackChunkmusicblocks=self.webpackChunkmusicblocks||[]).push([[9737,4942],{9737:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(2982),a=n(885),i=n(5671),o=n(3144),s=n(4942),m=n(8785),u=n(197);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"equal";(0,i.Z)(this,e),(0,s.Z)(this,"_freqs",[]),(0,s.Z)(this,"_genericNoteNames",[]),this._name=t,this._octaveLength=12,this._baseFrequency=e.C0,this._numberOfOctaves=8,this._ratios={},this._intervals=[],this.generate(this._name)}return(0,o.Z)(e,[{key:"baseFrequency",get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=e}},{key:"numberOfOctaves",get:function(){return this._numberOfOctaves},set:function(e){this._numberOfOctaves=Math.min(1,Number(Math.abs(e)))}},{key:"name",get:function(){return this._name}},{key:"freqs",get:function(){return this._freqs}},{key:"getNearestFreqIndex",value:function(e){var t,n=1e4,r=0,i=h(this._freqs.entries());try{for(i.s();!(t=i.n()).done;){var o=(0,a.Z)(t.value,2),s=o[0],m=o[1];if(!(Math.abs(m-e)<n))return r;if(0==(n=Math.abs(m-e)))return s;r=s}}catch(e){i.e(e)}finally{i.f()}return r}},{key:"noteNames",get:function(){return this._genericNoteNames}},{key:"getNoteName",value:function(e){return this._genericNoteNames[e]}},{key:"getModalIndex",value:function(e){return this._genericNoteNames.indexOf(e)}},{key:"getFreqByIndex",value:function(e){return 0===this._freqs.length?0:(e=Math.max(0,Math.min(this._freqs.length-1,e)),this._freqs[Math.floor(e)])}},{key:"getModalIndexAndOctaveFromFreqIndex",value:function(e){return[e%this._octaveLength,Math.floor(e/this._octaveLength)]}},{key:"getFreqByModalIndexAndOctave",value:function(e,t){if(0===this._freqs.length)return 0;var n=Math.floor(t)*this._octaveLength+e;return this._freqs[Math.max(0,Math.min(n,this._freqs.length-1))]}},{key:"getGenericNoteNameAndOctaveByFreqIndex",value:function(e){return[this._genericNoteNames[e%this._octaveLength],Math.floor(e/this._octaveLength)]}},{key:"getFreqIndexByGenericNoteNameAndOctave",value:function(e,t){if(!this._genericNoteNames.includes(e))throw new u.ItemNotFoundDefaultError("Note '".concat(e,"' not found in generic note names."),0);var n=this._genericNoteNames.indexOf(e),r=t*this._octaveLength+n;return r<0?0:r>this._freqs.length-1?this._freqs.length-1:Math.floor(r)}},{key:"getFreqByGenericNoteNameAndOctave",value:function(e,t){try{return 0===this._freqs.length?0:this._freqs[this.getFreqIndexByGenericNoteNameAndOctave(e,t)]}catch(e){return this._freqs[e.defaultValue]}}},{key:"numberOfSemitonesInOctave",get:function(){return this._octaveLength}},{key:"numberOfNotesInTemperament",get:function(){return this._freqs.length}},{key:"_generateGenericNoteNames",value:function(){this._genericNoteNames=[];for(var e=0;e<this._octaveLength;e++)this._genericNoteNames.push("n".concat(e))}},{key:"generate",value:function(t){var n,a;this._name=t.toLowerCase(),"third comma meantone"==this._name?(a=(0,r.Z)(e.THIRD_COMMA_MEANTONE_INTERVALS),n=e.THIRD_COMMA_MEANTONE_RATIOS):"quarter comma meantone"==this._name?(a=(0,r.Z)(e.QUARTER_COMMA_MEANTONE_INTERVALS),n=e.QUARTER_COMMA_MEANTONE_RATIOS):(a=(0,r.Z)(e.DEFAULT_INTERVALS),"equal"==this._name?n=e.TWELVE_TONE_EQUAL_RATIOS:"just intonation"==this._name?n=e.JUST_INTONATION_RATIOS:"pythagorean"==this._name?n=e.PYTHAGOREAN_RATIOS:(console.debug("Unknown temperament ".concat(t,"; using equal temperament")),n=e.TWELVE_TONE_EQUAL_RATIOS)),this._ratios=n,this._intervals=a,this._octaveLength=a.length-1,this._freqs=[this._baseFrequency];for(var i=0;i<this.numberOfOctaves;i++)for(var o=this._freqs[this._freqs.length-1],s=0;s<this._octaveLength;s++)0!==s&&this._freqs.push(o*n[a[s]]);this._generateGenericNoteNames()}},{key:"generateEqualTemperament",value:function(e){var t=Math.floor(e);t<1&&(t=1),this._name="name_".concat(t),this._octaveLength=t,this._freqs=[this._baseFrequency];for(var n=Math.pow(2,1/t),r=0;r<this.numberOfOctaves;r++)for(var a=0;a<this._octaveLength;a++)0!=a&&this._freqs.push(this._freqs[this._freqs.length-1]*n);this._generateGenericNoteNames()}},{key:"generateCustom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"custom";this._name=n,this._octaveLength=e.length,this._freqs=[this._baseFrequency];for(var r=0;r<this.numberOfOctaves;r++)for(var a=this._freqs[this._freqs.length-1],i=0;i<this._octaveLength;i++)0!==i&&this._freqs.push(a*t[e[i]]);this._generateGenericNoteNames()}},{key:"tune",value:function(e,t,n){var r;if(e=(0,m.normalizePitch)(e),m.CHROMATIC_NOTES_SHARP.includes(e))r=m.CHROMATIC_NOTES_SHARP.indexOf(e);else{if(!m.CHROMATIC_NOTES_FLAT.includes(e))throw new u.ItemNotFoundDefaultError("Pitch '".concat(e,"' not found."),0);r=m.CHROMATIC_NOTES_FLAT.indexOf(e)}return Object.keys(this._ratios).length&&0!==this._intervals.length&&(this._baseFrequency=n/Math.pow(2,t)/this._ratios[this._intervals[r]],this.generate(this._name)),this._baseFrequency}},{key:"toString",value:function(){var e,t=[],n=h(this.freqs);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push((r+.005).toFixed(2))}}catch(e){n.e(e)}finally{n.f()}return"this.name temperament:\n\n".concat(t.join("\n"),"\n")}}]),e}();(0,s.Z)(f,"DEFAULT_INTERVALS",["perfect 1","minor 2","major 2","minor 3","major 3","perfect 4","diminished 5","perfect 5","minor 6","major 6","minor 7","major 7","perfect 8"]),(0,s.Z)(f,"TWELVE_TONE_EQUAL_RATIOS",{"perfect 1":1,"minor 2":Math.pow(2,1/12),"augmented 1":Math.pow(2,1/12),"major 2":Math.pow(2,2/12),"augmented 2":Math.pow(2,.25),"minor 3":Math.pow(2,.25),"major 3":Math.pow(2,4/12),"augmented 3":Math.pow(2,5/12),"diminished 4":Math.pow(2,4/12),"perfect 4":Math.pow(2,5/12),"augmented 4":Math.pow(2,.5),"diminished 5":Math.pow(2,.5),"perfect 5":Math.pow(2,7/12),"augmented 5":Math.pow(2,8/12),"minor 6":Math.pow(2,8/12),"major 6":Math.pow(2,.75),"augmented 6":Math.pow(2,10/12),"minor 7":Math.pow(2,10/12),"major 7":Math.pow(2,11/12),"augmented 7":Math.pow(2,1),"diminished 8":Math.pow(2,11/12),"perfect 8":2}),(0,s.Z)(f,"JUST_INTONATION_RATIOS",{"perfect 1":1,"minor 2":16/15,"augmented 1":16/15,"major 2":9/8,"augmented 2":1.2,"minor 3":1.2,"major 3":5/4,"augmented 3":4/3,"diminished 4":5/4,"perfect 4":4/3,"augmented 4":1.4,"diminished 5":1.4,"perfect 5":1.5,"augmented 5":1.6,"minor 6":1.6,"major 6":5/3,"augmented 6":16/9,"minor 7":16/9,"major 7":15/8,"augmented 7":2,"diminished 8":15/8,"perfect 8":2}),(0,s.Z)(f,"PYTHAGOREAN_RATIOS",{"perfect 1":1,"minor 2":256/243,"augmented 1":256/243,"major 2":9/8,"augmented 2":32/27,"minor 3":32/27,"major 3":81/64,"augmented 3":4/3,"diminished 4":81/64,"perfect 4":4/3,"augmented 4":729/512,"diminished 5":729/512,"perfect 5":1.5,"augmented 5":128/81,"minor 6":128/81,"major 6":27/16,"augmented 6":16/9,"minor 7":16/9,"major 7":243/128,"augmented 7":2,"diminished 8":243/128,"perfect 8":2}),(0,s.Z)(f,"THIRD_COMMA_MEANTONE_RATIOS",{"perfect 1":1,"minor 2":1.075693,"augmented 1":1.037156,"major 2":1.115656,"augmented 2":1.157109,"minor 3":1.200103,"major 3":1.244694,"augmented 3":1.290943,"diminished 4":1.290943,"perfect 4":1.338902,"augmented 4":1.38865,"diminished 5":1.440247,"perfect 5":1.493762,"augmented 5":1.549255,"minor 6":1.60682,"major 6":1.666524,"augmented 6":1.728445,"minor 7":1.792668,"major 7":1.859266,"augmented 7":1.92835,"diminished 8":1.92835,"perfect 8":2}),(0,s.Z)(f,"THIRD_COMMA_MEANTONE_INTERVALS",["perfect 1","augmented 1","minor 2","major 2","augmented 2","minor 3","major 3","diminished 4","perfect 4","augmented 4","diminished 5","perfect 5","augmented 5","minor 6","major 6","augmented 6","minor 7","major 7","diminished 8","perfect 8"]),(0,s.Z)(f,"QUARTER_COMMA_MEANTONE_RATIOS",{"perfect 1":1,"minor 2":16/15,"augmented 1":25/24,"major 2":9/8,"augmented 2":75/64,"minor 3":1.2,"major 3":5/4,"diminished 4":1.28,"augmented 3":125/96,"perfect 4":4/3,"augmented 4":25/18,"diminished 5":1.44,"perfect 5":1.5,"augmented 5":25/16,"minor 6":1.6,"major 6":5/3,"augmented 6":125/72,"minor 7":1.8,"major 7":15/8,"diminished 8":1.92,"augmented 7":125/64,"perfect 8":2}),(0,s.Z)(f,"QUARTER_COMMA_MEANTONE_INTERVALS",["perfect 1","augmented 1","minor 2","major 2","augmented 2","minor 3","major 3","diminished 4","augmented 3","perfect 4","augmented 4","diminished 5","perfect 5","augmented 5","minor 6","major 6","augmented 6","minor 7","major 7","diminished 8","augmented 7","perfect 8"]),(0,s.Z)(f,"C0",16.3516)},4942:function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},2982:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(907),a=n(181);function i(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);