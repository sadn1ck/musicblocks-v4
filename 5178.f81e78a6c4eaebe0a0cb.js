"use strict";(self.webpackChunkmusicblocks=self.webpackChunkmusicblocks||[]).push([[5178],{5178:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var i=n(885),r=n(5671),a=n(3144),o=n(4942),s=n(4116),h=n(8785),c=n(197);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"major",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"c",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;(0,r.Z)(this,e),this._mode="",this._halfSteps=[],this._solfegeNotes=[],this._scalarModeNumbers=[],this._eastIndianSolfegeNotes=[];var a=!0;if("string"==typeof t){var o=t.toLowerCase();o in e.MAQAM_KEY_OVERRIDES&&(n=e.MAQAM_KEY_OVERRIDES[o],o="maqam"),o in e.MUSICAL_MODES?(this._mode=o,this._halfSteps=e.MUSICAL_MODES[this._mode]):(console.debug('mode "'.concat(o,'"not found')),this._mode="chromatic",this._halfSteps=e.MUSICAL_MODES[this._mode])}else Array.isArray(t)&&(this._mode="custom",this._halfSteps=t);this._key=n;var c=0;if("string"==typeof this._key&&(n=(0,h.normalizePitch)(n),(a=this._preferSharps(this._key,this._mode)||this._key.includes("#"))?(h.CHROMATIC_NOTES_SHARP.includes(this._key)||(this._key=h.EQUIVALENT_SHARPS[this._key]),c=(0,h.findSharpIndex)(this._key)):h.CHROMATIC_NOTES_FLAT.includes(this._key)||this._key.includes("b")?(h.CHROMATIC_NOTES_FLAT.includes(this._key)||(this._key=h.EQUIVALENT_FLATS[this._key]),c=(0,h.findFlatIndex)(this._key)):"n"===this._key[0]&&this._key.slice(1).match(/^\d+$/)?c=Number(this._key.slice(1)):console.debug("Could not find key index: "+this._key)),this._scaleObj=0===this._halfSteps.length?new s.Scale(null,c,i):new s.Scale(this._halfSteps,c,i,a),this._genericScale=this._scaleObj.getScale(),this._numberOfSemitones=this._scaleObj.numberOfSemitones,this._fixedSolfege=!1,12===this._numberOfSemitones){"number"==typeof this._key&&(this._key=h.CHROMATIC_NOTES_SHARP[this._key]),this._noteNames=this._scaleObj.noteNames;var u=this._scaleObj.getScale(this._preferSharps(this._key,this._mode)||this._key.includes("#")?h.CHROMATIC_NOTES_SHARP:h.CHROMATIC_NOTES_FLAT);u[0]=this._key,u[u.length-1]=this._key,this._scale=this.normalizeScale(u),this._solfegeNotes=this._modeMapList(h.SOLFEGE_NAMES),this._eastIndianSolfegeNotes=this._modeMapList(h.EAST_INDIAN_NAMES),this._scalarModeNumbers=this._modeMapList(h.SCALAR_MODE_NUMBERS)}else this._noteNames=this._scaleObj.noteNames,this._scale=21===this._noteNames.length?this._scaleObj.getScale(h.ALL_NOTES):this._scaleObj.getScale(),"number"==typeof this._key&&(this._key=this._noteNames[this._key]),this._solfegeNotes=[],this._eastIndianSolfegeNotes=[],this._scalarModeNumbers=[];this._customNoteNames=[],this._keySignature="".concat(this._key," ").concat(this._mode)}return(0,a.Z)(e,[{key:"key",get:function(){return this._key}},{key:"mode",get:function(){return this._mode}},{key:"keySignature",get:function(){return this._keySignature}},{key:"scale",get:function(){return this._scale.slice(0,-1)}},{key:"fixedSolfege",get:function(){return this._fixedSolfege},set:function(e){this._fixedSolfege=e}},{key:"solfegeNotes",get:function(){return this._solfegeNotes}},{key:"modeLength",get:function(){return this._scale.length-1}},{key:"numberOfSemitones",get:function(){return this._numberOfSemitones}},{key:"customNoteNames",get:function(){return this._customNoteNames},set:function(e){if(e.length!==this.modeLength)throw new c.InvalidArgumentError("A unique name must be assigned to every note in the mode.");var t,n=new Set,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(n.has(r))throw new c.InvalidArgumentError("A unique name must be assigned to every note in the mode.");n.add(r)}}catch(e){i.e(e)}finally{i.f()}this._customNoteNames=e.slice(0)}},{key:"_preferSharps",value:function(t,n){return e.PREFER_SHARPS.includes("".concat(t," ").concat(n))}},{key:"normalizeScale",value:function(e){if(e.length<9){if(!this._preferSharps(this._key,this._mode)&&this._key.includes("#")&&e.forEach((function(t,n){t.includes("b")&&t in h.EQUIVALENT_SHARPS&&(e[n]=h.EQUIVALENT_SHARPS[t])})),8===e.length)for(var t=0;t<e.length-1;t++){var n=h.PITCH_LETTERS.indexOf(e[t][0]),i=h.PITCH_LETTERS.indexOf(e[t+1][0]);i<n&&(i+=7),i-n>1&&e[t+1]in h.CONVERT_DOWN&&(e[t+1]=h.CONVERT_DOWN[e[t+1]])}for(var r=0;r<e.length-1;r++){var a="",o=void 0;0===r&&e[r][0]===e[r+1][0]?e[r+1]in h.CONVERT_UP&&(o=h.CONVERT_UP[e[r+1]],e[r+1]=o):e[r][0]===e[r+1][0]&&(e[r]in h.CONVERT_DOWN&&(a=h.CONVERT_DOWN[e[r]]),a[0]!==e[r-1][0]?e[r]=a:e[r+1]in h.CONVERT_UP&&(o=h.CONVERT_UP[e[r+1]],e[r+1]=o))}}else this._key.includes("#")&&e.forEach((function(t,n){t.includes("b")&&t in h.EQUIVALENT_SHARPS&&(e[n]=h.EQUIVALENT_SHARPS[t])}));for(var s=!1,c=!1,u=0;u<e.length;u++){if(e[u].includes("x")){s=!0;break}e[u].length>2&&(c=!0)}return s?e.forEach((function(t,n){t.includes("x")&&(e[n]=h.CONVERT_UP[t]),e[n]in h.EQUIVALENT_FLATS&&(e[n]=h.EQUIVALENT_FLATS[e[n]])})):c&&e.forEach((function(t,n){t.length>2&&(e[n]=h.CONVERT_DOWN[t]),t in h.EQUIVALENT_SHARPS&&(e[n]=h.EQUIVALENT_SHARPS[e[n]])})),e}},{key:"_modeMapList",value:function(e){for(var t=[],n=this.modeLength,i="cdefgab".indexOf(this._scale[0][0]),r=0;r<this._scale.length;r++){var a="cdefgab".indexOf(this._scale[r][0])-i;a<0&&(a+=e.length),n<8?t.push(e[a]):t.push(e[a]+["bb","b","","#","x"][(0,h.stripAccidental)(this._scale[r])[1]+2])}return t[t.length-1]=t[0],t}},{key:"_nameConverter",value:function(e,t){if(t.includes(e)){var n=t.indexOf(e);try{return this.convertToGenericNoteName(this._scale[n])}catch(e){return e.defaultValue}}var r,a=(0,h.stripAccidental)(e),o=(0,i.Z)(a,2);if(e=o[0],r=o[1],t.includes(e)){var s;n=t.indexOf(e);try{s=this.convertToGenericNoteName(this._scale[n])}catch(e){s=e.defaultValue}return n=this._noteNames.indexOf(s),(n+=r)<0&&(n+=this._numberOfSemitones),n>this._numberOfSemitones-1&&(n-=this._numberOfSemitones),this._noteNames[n]}return null}},{key:"pitchNameType",value:function(e){var t=(0,h.getPitchType)(e);if(t===h.UNKNOWN_PITCH_NAME){var n=(0,h.stripAccidental)(e)[0];this._customNoteNames.includes(n)&&(t=h.CUSTOM_NAME)}return t}},{key:"convertToGenericNoteName",value:function(e){e=(0,h.normalizePitch)(e);var t=this.pitchNameType(e);if(t===h.GENERIC_NOTE_NAME)return e;if(21===this._numberOfSemitones&&h.ALL_NOTES.includes(e))return this._noteNames[h.ALL_NOTES.indexOf(e)];if(t===h.LETTER_NAME){if(e.includes("#")&&(0,h.isASharp)(e))return this._noteNames[(0,h.findSharpIndex)(e)];if((0,h.isAFlat)(e))return this._noteNames[(0,h.findFlatIndex)(e)];if(e in h.EQUIVALENT_SHARPS)return this._noteNames[h.CHROMATIC_NOTES_SHARP.indexOf(h.EQUIVALENT_SHARPS[e])];if(e in h.EQUIVALENT_FLATS)return this._noteNames[(0,h.findFlatIndex)(h.EQUIVALENT_FLATS[e])];if(e in h.EQUIVALENTS)return this._noteNames[h.EQUIVALENTS[e][0].includes("#")?(0,h.findSharpIndex)(h.EQUIVALENTS[e][0]):(0,h.findFlatIndex)(h.EQUIVALENTS[e][0])]}if(t===h.SOLFEGE_NAME)if(this._fixedSolfege){var n=this._nameConverter(e,this._solfegeNotes);if(null!==n)return n}else{if(e.includes("#")&&h.SOLFEGE_SHARP.includes(e))return this._noteNames[h.SOLFEGE_SHARP.indexOf(e)];if(h.SOLFEGE_FLAT.includes(e))return this._noteNames[h.SOLFEGE_FLAT.indexOf(e)]}if(t===h.CUSTOM_NAME){if(this._customNoteNames.length>0){var i=this._nameConverter(e,this._customNoteNames);if(null!==i)return i}if(this._fixedSolfege){var r=(0,h.stripAccidental)(e)[0],a=this._nameConverter(r,this._customNoteNames);if(null!==a)return a}else{var o=(0,h.stripAccidental)(e)[0];if(e.includes("#")&&this._customNoteNames.includes(o)){var s=this._customNoteNames.indexOf(o)+1;return s>this._noteNames.length&&(s=0),this._noteNames[s]}if(h.SCALAR_NAMES_FLAT.includes(e)){var u=this._customNoteNames.indexOf(o)-1;return u>0&&(u=this._noteNames.length),this._noteNames[u]}}}if(t===h.EAST_INDIAN_SOLFEGE_NAME)if(this._fixedSolfege){var l=this._nameConverter(e,this._eastIndianSolfegeNotes);if(null!==l)return l}else{if(e.includes("#")&&h.EAST_INDIAN_SHARP.includes(e))return this._noteNames[h.EAST_INDIAN_SHARP.indexOf(e)];if(h.EAST_INDIAN_FLAT.includes(e))return this._noteNames[h.EAST_INDIAN_FLAT.indexOf(e)]}if(t===h.SCALAR_MODE_NUMBER)if(this._fixedSolfege){var m=this._nameConverter(e,this._scalarModeNumbers);if(null!==m)return m}else{if(e.includes("#")&&h.SCALAR_NAMES_SHARP.includes(e))return this._noteNames[h.SCALAR_NAMES_SHARP.indexOf(e)];if(h.SCALAR_NAMES_FLAT.includes(e))return this._noteNames[h.SCALAR_NAMES_FLAT.indexOf(e)]}throw new c.ItemNotFoundDefaultError("Pitch name ".concat(e," not found."),e)}},{key:"_genericNoteNameToLetterName",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=(0,h.normalizePitch)(e),(0,h.isASharp)(e))return[e];if((0,h.isAFlat)(e))return[e];if(21===this._numberOfSemitones)return[h.ALL_NOTES[this._noteNames.indexOf(e)]];if(12!==this._numberOfSemitones)throw new c.InvalidArgumentDefaultError("Cannot convert ".concat(e," to a letter name."),[e]);if(this._noteNames.includes(e))return[t?h.CHROMATIC_NOTES_SHARP[this._noteNames.indexOf(e)]:h.CHROMATIC_NOTES_FLAT[this._noteNames.indexOf(e)]];throw new c.ItemNotFoundDefaultError("Note name ".concat(e," not found."),[e])}},{key:"_convertFromNoteName",value:function(e,t){if(e=(0,h.normalizePitch)(e),t.includes(e))return[e];if(12!==this._numberOfSemitones)throw new c.InvalidArgumentDefaultError("Cannot convert ".concat(e," to a letter name."),[e]);if(this._noteNames.includes(e)){var n=h.CHROMATIC_NOTES_SHARP[this._noteNames.indexOf(e)];try{var r=this.closestNote(n),a=(0,i.Z)(r,3),o=(a[0],a[1]),s=a[2];if(0===s)return[t[o]];var u=(0,h.stripAccidental)(t[o]),l=(0,i.Z)(u,2);return[l[0]+["bb","b","","#","x"][l[1]+s+2]]}catch(t){throw new c.ItemNotFoundDefaultError("Cannot find closest note to "+n,[e])}}throw new c.ItemNotFoundDefaultError("Note name ".concat(e," not found."),[e])}},{key:"_findMoveable",value:function(e,t,n,i){if(e=(0,h.normalizePitch)(e),t.includes(e))return[e];if(n.includes(e))return[e];if(12!==this._numberOfSemitones)throw new c.InvalidArgumentDefaultError("Cannot convert noteName",[e]);if(this._noteNames.includes(e))return[i?t[this._noteNames.indexOf(e)]:n[this._noteNames.indexOf(e)]];throw new c.InvalidArgumentDefaultError("Cannot convert ".concat(e),[e])}},{key:"_genericNoteNameToSolfege",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=this._convertFromNoteName(e,this._solfegeNotes)}catch(e){t=e.defaultValue}try{n=this._findMoveable(e,h.SOLFEGE_SHARP,h.SOLFEGE_FLAT,i)}catch(e){n=e.defaultValue}return this._fixedSolfege?t:n}},{key:"_genericNoteNameToEastIndianSolfege",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=this._convertFromNoteName(e,this._eastIndianSolfegeNotes)}catch(e){t=e.defaultValue}try{n=this._findMoveable(e,h.EAST_INDIAN_SHARP,h.EAST_INDIAN_FLAT,i)}catch(e){n=e.defaultValue}return this._fixedSolfege?t:n}},{key:"_genericNoteNameToScalarModeNumber",value:function(e){var t,n,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t=this._convertFromNoteName(e,this._scalarModeNumbers)}catch(e){t=e.defaultValue}try{n=this._findMoveable(e,h.SCALAR_NAMES_SHARP,h.SCALAR_NAMES_FLAT,i)}catch(e){n=e.defaultValue}return this._fixedSolfege?t:n}},{key:"_genericNoteNameToCustomNoteName",value:function(e){try{return this._convertFromNoteName(e,this._customNoteNames)}catch(e){return e.defaultValue}}},{key:"modalPitchToLetter",value:function(e){var t=this.modeLength;e=Math.floor(Number(e));var n=Math.floor(e/t);if(e<0)for(n--;e<0;)e+=t;for(;e>t-1;)e-=t;return[this._scale[e],n]}},{key:"noteInScale",value:function(e){try{return 0===this.closestNote(e)[2]}catch(e){return 0===e.defaultValue[2]}}},{key:"_mapToSemitoneRange",value:function(e,t){for(;e<0;)e+=this._numberOfSemitones,t--;for(;e>this._numberOfSemitones-1;)e-=this._numberOfSemitones,t++;return[e,t]}},{key:"semitoneTransform",value:function(e,t){e=(0,h.normalizePitch)(e);var n=this.pitchNameType(e),r=0;if(12===this._numberOfSemitones){if(n===h.LETTER_NAME){if((0,h.isASharp)(e)){var a=(0,h.findSharpIndex)(e);a+=t;var o=this._mapToSemitoneRange(a,r),s=(0,i.Z)(o,2);return a=s[0],r=s[1],[h.CHROMATIC_NOTES_SHARP[a],r]}if((0,h.isAFlat)(e)){var u=(0,h.findFlatIndex)(e);u+=t;var l=this._mapToSemitoneRange(u,r),m=(0,i.Z)(l,2);return u=m[0],r=m[1],[h.CHROMATIC_NOTES_FLAT[u],r]}var _=(0,h.stripAccidental)(e),f=(0,i.Z)(_,2),N=f[0],d=f[1];try{var S=this._noteNames.includes(N)?N:this.convertToGenericNoteName(N);if(this._noteNames.includes(S)){var v=this._noteNames.indexOf(S);v+=t;var A=this._mapToSemitoneRange(v+d,r),E=(0,i.Z)(A,2);return v=E[0],r=E[1],[this._noteNames[v],r]}}catch(t){throw new c.ItemNotFoundDefaultError("Cannot find ".concat(e," in note names."),[e,0])}}var y;try{y=this.convertToGenericNoteName(e)}catch(e){y=e.defaultValue}var g=y,T=(0,h.stripAccidental)(g),O=(0,i.Z)(T,2),b=O[0],p=O[1];if(this._noteNames.includes(b)){var L=this._noteNames.indexOf(b);L+=t;var I=this._mapToSemitoneRange(L+p,r),k=(0,i.Z)(I,2);return L=k[0],r=k[1],n===h.SOLFEGE_NAME?[this._genericNoteNameToSolfege(this._noteNames[L],e.includes("#"))[0],r]:n===h.EAST_INDIAN_SOLFEGE_NAME?[this._genericNoteNameToEastIndianSolfege(this._noteNames[L],e.includes("#"))[0],r]:n===h.SCALAR_MODE_NUMBER?[this._genericNoteNameToScalarModeNumber(this._noteNames[L],e.includes("#"))[0],r]:[this._noteNames[L],r]}throw new c.ItemNotFoundDefaultError("Cannot find ".concat(e," in note names."),[e,0])}var R=(0,h.stripAccidental)(e),M=(0,i.Z)(R,2),C=M[0],x=M[1];if(21===this._numberOfSemitones){var F=function(e,t){return 0===e&&t%3==2||1===e&&t%3==1||-1===e&&t%3==2?2:1};if(h.ALL_NOTES.includes(e)){if(a=h.ALL_NOTES.indexOf(e),t>0)for(var w=0;w<t;w++)a+=F(x,w);else for(var V=0;V<-t;V++)a-=F(x,V);var P=this._mapToSemitoneRange(a,r),D=(0,i.Z)(P,2);return a=D[0],r=D[1],[h.ALL_NOTES[a],r]}if(this._noteNames.includes(C)){var j=this._noteNames.indexOf(C);if(t>0)for(var H=0;H<t;H++)j+=F(x,H);else for(var U=0;U<-t;U++)j-=F(x,U);var Z=this._mapToSemitoneRange(j,r),G=(0,i.Z)(Z,2);return j=G[0],r=G[1],[this._noteNames[j],r]}}if(this._noteNames.includes(C)){var Q=this._noteNames.indexOf(C);Q+=t;var z=this._mapToSemitoneRange(Q+x,r),W=(0,i.Z)(z,2);return Q=W[0],r=W[1],[this._noteNames[Q],r]}throw new c.ItemNotFoundDefaultError("Cannot find ".concat(e," in note names."),[e,0])}},{key:"_mapToScalarRange",value:function(e,t){for(var n=this.modeLength;e<0;)e+=n,t-=1;for(;e>n-1;)e-=n,t+=1;return[e,t]}},{key:"scalarTransform",value:function(e,t){e=(0,h.normalizePitch)(e);var n,r,a=this.pitchNameType(e),o=e.includes("#");try{n=this.convertToGenericNoteName(e)}catch(e){n=e.defaultValue}try{r=this.closestNote(n)}catch(t){return[e,0]}for(var s=r,c=(0,i.Z)(s,3),u=(c[0],c[1]),l=c[2],m=u+t,_=this.modeLength,f=Math.floor(m/_),N=m;N<0;)N+=_;for(;N>_-1;)N-=_;var d=this._genericScale[N],S=this._restoreFormat(d,a,o);if(m<0&&f--,0===l)return[S,f];var v=this._noteNames.indexOf(d),A=this._mapToScalarRange(v-l,f),E=(0,i.Z)(A,2);return v=E[0],f=E[1],[this._restoreFormat(this._noteNames[v],a,o),f]}},{key:"genericNoteNameConvertToType",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._restoreFormat(e,t,n)}},{key:"_restoreFormat",value:function(e,t,n){if(t===h.GENERIC_NOTE_NAME)return e;if(t===h.LETTER_NAME)try{return this._genericNoteNameToLetterName(e,n)[0]}catch(e){return e.defaultValue[0]}return t===h.SOLFEGE_NAME?this._genericNoteNameToSolfege(e,n)[0]:t===h.CUSTOM_NAME?this._genericNoteNameToCustomNoteName(e)[0]:t===h.SCALAR_MODE_NUMBER?this._genericNoteNameToScalarModeNumber(e)[0]:t===h.EAST_INDIAN_SOLFEGE_NAME?this._genericNoteNameToEastIndianSolfege(e)[0]:e}},{key:"_pitchToNoteNumber",value:function(e,t){var n;try{n=this.convertToGenericNoteName(e)}catch(e){n=e.defaultValue}var i=this._noteNames.indexOf(n),r=t*this._numberOfSemitones+i;return Math.floor(Number(r))}},{key:"semitoneDistance",value:function(e,t,n,i){return this._pitchToNoteNumber(n,i)-this._pitchToNoteNumber(e,t)}},{key:"scalarDistance",value:function(e,t,n,i){var r,a;try{r=this.closestNote(e)}catch(e){r=e.defaultValue}try{a=this.closestNote(n)}catch(e){a=e.defaultValue}var o=r[1]+this.modeLength*t;return[a[1]+this.modeLength*i-o,r[2]+a[2]]}},{key:"invert",value:function(e,t,n,r,a){var o,s;if("even"===a||"odd"===a){var h=this.semitoneDistance(n,r,e,t);"even"===a?h*=2:"odd"===a&&(h=2*h-1);try{var c=this.semitoneTransform(e,-h),u=(0,i.Z)(c,2);o=u[0],s=u[1]}catch(e){var l=(0,i.Z)(e.defaultValue,2);o=l[0],s=l[1]}}else{var m=this.scalarDistance(n,r,e,t)[0];m*=2;var _=this.scalarTransform(e,-m),f=(0,i.Z)(_,2);o=f[0],s=f[1]}return[o,t+s]}},{key:"closestNote",value:function(e){e=(0,h.normalizePitch)(e);var t=this.pitchNameType(e),n=e.includes("#");try{e=this.convertToGenericNoteName(e)}catch(t){e=t.defaultValue}var r,a=(0,h.stripAccidental)(e),o=(0,i.Z)(a,2),s=o[0],u=o[1];this._noteNames.includes(s)&&(r=this._noteNames.indexOf(s),r=this._mapToSemitoneRange(r+u,0)[0],e=this._noteNames[r]);for(var l=0;l<this.modeLength;l++)if(e===this._genericScale[l])return[this._restoreFormat(e,t,n),l,0];if(this._noteNames.includes(e)){for(var m=this._noteNames.indexOf(e),_=this._numberOfSemitones,f="",N=0;N<this.modeLength;N++){var d=this._noteNames.indexOf(this._genericScale[N]),S=d-m,v=d+this._numberOfSemitones-m;Math.abs(S)<Math.abs(_)&&(f=this._genericScale[N],_=S),Math.abs(v)<Math.abs(_)&&(f=this._genericScale[N],_=v)}if(_<this._numberOfSemitones)return[this._restoreFormat(f,t,n),this._genericScale.indexOf(f),_];throw new c.ItemNotFoundDefaultError("Closest note to ".concat(e," not found."),[this._restoreFormat(e,t,n),0,0])}throw new c.ItemNotFoundDefaultError("Note ".concat(e," not found."),[this._restoreFormat(e,t,n),0,0])}},{key:"toString",value:function(){for(var e=[],t=0;t<this._halfSteps.length;t++)e.push(String(this._halfSteps[t]));var n,i=this._scale.join(" ");return n=this._key.length>1?"".concat(this._key[0].toUpperCase()).concat(this._key.slice(1)):this._key.toUpperCase(),"".concat(n," ").concat(this._mode.toUpperCase()," [").concat(i,"]")}}]),e}();(0,o.Z)(l,"MUSICAL_MODES",{chromatic:[1,1,1,1,1,1,1,1,1,1,1,1],algerian:[2,1,2,1,1,1,3,1],diminished:[2,1,2,1,2,1,2,1],spanish:[1,2,1,1,1,2,2,2],octatonic:[1,2,1,2,1,2,1,2],bebop:[1,1,1,2,2,1,2,2],major:[2,2,1,2,2,2,1],"harmonic major":[2,2,1,2,1,3,1],minor:[2,1,2,2,1,2,2],"natural minor":[2,1,2,2,1,2,2],"harmonic minor":[2,1,2,2,1,3,1],"melodic minor":[2,1,2,2,2,2,1],ionian:[2,2,1,2,2,2,1],dorian:[2,1,2,2,2,1,2],phrygian:[1,2,2,2,1,2,2],lydian:[2,2,2,1,2,2,1],mixolydian:[2,2,1,2,2,1,2],aeolian:[2,1,2,2,1,2,2],locrian:[1,2,2,1,2,2,2],"jazz minor":[2,1,2,2,2,2,1],arabic:[2,2,1,1,2,2,2],byzantine:[1,3,1,2,1,3,1],enigmatic:[1,3,2,2,2,1,1],ethiopian:[2,1,2,2,1,2,2],geez:[2,1,2,2,1,2,2],hindu:[2,2,1,2,1,2,2],hungarian:[2,1,3,1,1,3,1],maqam:[1,3,1,2,1,3,1],"romanian minor":[2,1,3,1,2,1,2],"spanish gypsy":[1,3,1,2,1,2,2],"minor blues":[3,2,1,1,3,2],"major blues":[2,1,1,3,2,2],"whole tone":[2,2,2,2,2,2],"major pentatonic":[2,2,3,2,3],"minor pentatonic":[3,2,2,3,2],chinese:[4,2,1,4,1],egyptian:[2,3,2,3,2],hirajoshi:[1,4,1,4,2],in:[1,4,2,1,4],minyo:[3,2,2,3,2],fibonacci:[1,1,2,3,5]}),(0,o.Z)(l,"MAQAM_KEY_OVERRIDES",{"hijaz kar":"c","hijaz kar maqam":"c",shahnaz:"d","maqam mustar":"eb","maqam jiharkah":"f","shadd araban":"g",suzidil:"a",ajam:"bb","ajam maqam":"bb"}),(0,o.Z)(l,"PREFER_SHARPS",["c major","c major pentatonic","c major blues","c whole tone","d dorian","e phrygian","f lydian","g mixolydian","a minor","a minor pentatonic","b locrian","g major","g major pentatonic","g major blues","g whole tone","a dorian","b phrygian","c lydian","d mixolydian","e minor","e minor pentatonic","f# locrian","d major","d major pentatonic","d major blues","d whole tone","e dorian","f# phrygian","g lydian","a mixolydian","b minor","b minor pentatonic","c# locrian","a major","a major pentatonic","a major blues","a whole tone","b dorian","c# phrygian","d lydian","e mixolydian","f# minor","f# minor pentatonic","e major","e major pentatonic","e major blues","e whole tone","f# dorian","a lydian","b mixolydian","c# minor","c# minor pentatonic","b major","b major pentatonic","b major blues","b whole tone","c# dorian","d# phrygian","e lydian","f# mixolydian","g# minor","g# minor pentatonic","a# locrian"])},4116:function(e,t,n){n.r(t),n.d(t,{Scale:function(){return u}});var i=n(885),r=n(5671),a=n(3144),o=n(4942),s=n(197);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if((0,r.Z)(this,e),null===t){this._numberOfSemitones=a,t=[];for(var s=0;s<this._numberOfSemitones;s++)t.push(1)}else{this._numberOfSemitones=0;var c,u=h(t);try{for(u.s();!(c=u.n()).done;){var l=c.value;this._numberOfSemitones+=l}}catch(e){u.e(e)}finally{u.f()}}this._noteNames=[];for(var m=0;m<this._numberOfSemitones;m++)this._noteNames.push("n".concat(m));var _=n%this._noteNames.length,f=0;this._scale=[this._noteNames[_]],this._octaveDeltas=[f];var N,d=h(t);try{for(d.s();!(N=d.n()).done;){var S=N.value;(_+=S)>=this._numberOfSemitones&&(f++,_-=this._numberOfSemitones),this._scale.push(this._noteNames[_]),this._octaveDeltas.push(f)}}catch(e){d.e(e)}finally{d.f()}if(this._numberOfSemitones!==a&&21==a){var v,A=o?0:1,E=h(this._scale.entries());try{for(E.s();!(v=E.n()).done;){var y=(0,i.Z)(v.value,2),g=y[0],T=y[1];this._scale[g]=e.TWELVE2TWENTYONE[T][A]}}catch(e){E.e(e)}finally{E.f()}this._numberOfSemitones=a,this._noteNames=[];for(var O=0;O<this._numberOfSemitones;O++)this._noteNames.push("n".concat(O))}}return(0,a.Z)(e,[{key:"numberOfSemitones",get:function(){return this._noteNames.length}},{key:"noteNames",get:function(){return this._noteNames}},{key:"getScale",value:function(e){if(void 0===e)return this._scale;if(e.length===this._numberOfSemitones){for(var t=[],n=0;n<this._scale.length;n++)t.push(e[this._noteNames.indexOf(this._scale[n])]);return t}throw new s.InvalidArgumentError("pitch format does not match number of semitones")}},{key:"getScaleAndOctaveDeltas",value:function(e){return[this.getScale(e),this._octaveDeltas]}}]),e}();(0,o.Z)(u,"TWELVE2TWENTYONE",{n0:["n0","n0"],n1:["n1","n2"],n2:["n3","n3"],n3:["n4","n5"],n4:["n6","n6"],n5:["n9","n9"],n6:["n10","n11"],n7:["n12","n12"],n8:["n13","n14"],n9:["n15","n15"],n10:["n16","n17"],n11:["n18","n18"]})}}]);